{"pageProps":{"sql":"-- {\"id\":1651,\"name\":\"james\",\"money\":293.899778,\"dateone\":\"2020-07-30 10:08:22\",\"age\":\"33\",\"datethree\":\"2020-07-30 10:08:22.123\",\"datesix\":\"2020-07-30 10:08:22.123456\",\"datenigth\":\"2020-07-30 10:08:22.123456789\",\"dtdate\":\"2020-07-30\",\"dttime\":\"11:08:22\"}\nCREATE TABLE source\n(\n    id        INT\n    , name      STRING\n    , money     decimal\n    , dateone   timestamp\n    , age       bigint\n    , datethree timestamp\n    , datesix   timestamp(6)\n    , datenigth timestamp(9)\n    , dtdate    date\n    , dttime    time\n    , PROCTIME AS PROCTIME()\n) WITH (\n      -- 'connector' = 'stream-x'\n\n      'connector' = 'kafka-x'\n      ,'topic' = 'da'\n      ,'properties.bootstrap.servers' = 'kudu1:9092'\n      ,'properties.group.id' = 'luna_g'\n      -- ,'scan.startup.mode' = 'earliest-offset'\n      ,'format' = 'json'\n      ,'json.timestamp-format.standard' = 'SQL'\n      );\n\n\nCREATE TABLE side\n(\n    id        INT\n    , name      STRING\n    , money     decimal\n    , dateone   timestamp\n    , age       bigint\n    , datethree timestamp\n    , datesix   timestamp(6)\n    , datenigth timestamp(9)\n    , dtdate    date\n    , dttime    time\n\n    , afloat    float\n    , adouble   double\n    , aboolean  BOOLEAN\n    , abigint   BIGINT\n    , atinyint  TINYINT\n    , avarchar  varchar\n    , asmallint SMALLINT\n    -- , primary key (id,name) NOT ENFORCED -- 这里的pk，并不会作为查询redis的主键，所以作为维表可不写。是通过select中的join条件作为主键\n) WITH (\n      'connector' = 'redis-x' --必填\n      ,'url' = 'localhost:6379' --必填，格式ip:port[,ip:port]\n      ,'table-name' = 'cx' --必填\n      ,'password' = '123456' -- 密码 无默认，非必填项\n      ,'redis-type' = '1' -- redis模式（1 单机，2 哨兵， 3 集群），默认：1\n      ,'master-name' = 'lala' -- 主节点名称（哨兵模式下为必填项）\n      ,'database' = '0' -- redis 的数据库地址，默认：0\n\n      ,'timeout' = '10000' -- 连接超时时间，默认：10000毫秒\n      ,'max.total' = '5' -- 最大连接数 ，默认：8\n      ,'max.idle' = '5' -- 最大空闲连接数，默认：8\n      ,'min.idle' = '0' -- 最小空闲连接数 ，默认：0\n\n      ,'lookup.cache-type' = 'all' -- 维表缓存类型(NONE、LRU、ALL)，默认LRU\n      ,'lookup.cache-period' = '4600000' -- ALL维表每隔多久加载一次数据，默认3600000毫秒\n      ,'lookup.cache.max-rows' = '20000' -- lru维表缓存数据的条数，默认10000条\n      ,'lookup.cache.ttl' = '700000' -- lru维表缓存数据的时间，默认60000毫秒\n      ,'lookup.fetch-size' = '2000' -- ALL维表每次从数据库加载的条数，默认1000条\n      ,'lookup.async-timeout' = '30000' -- lru维表缓访问超时时间，默认10000毫秒，暂时没用到\n      ,'lookup.parallelism' = '3' -- 维表并行度，默认null\n      );\n\n-- 维表数据\n-- 127.0.0.1:6379> HGETALL cx_1651\n--  1) \"dttime\"\n--  2) \"14:11:18\"\n--  3) \"adouble\"\n--  4) \"3807.67\"\n--  5) \"dtdate\"\n--  6) \"2021-06-22\"\n--  7) \"aboolean\"\n--  8) \"true\"\n--  9) \"datenigth\"\n-- 10) \"2021-06-22 06:11:18.478\"\n-- 11) \"afloat\"\n-- 12) \"7271.44\"\n-- 13) \"asmallint\"\n-- 14) \"7821\"\n-- 15) \"avarchar\"\n-- 16) \"h1\"\n-- 17) \"datesix\"\n-- 18) \"2021-06-22 06:11:18.478\"\n-- 19) \"money\"\n-- 20) \"3059\"\n\nCREATE TABLE sink\n(\n    id         INT\n    , name       STRING\n    , money      decimal\n    , dateone    timestamp\n    , age        bigint\n    , datethree  timestamp\n    , datesix    timestamp(6)\n    , datenigth  timestamp(9)\n    , dtdate     date\n    , dttime     time\n\n    , aid        INT\n    , aname      STRING\n    , amoney     decimal\n    , adateone   timestamp\n    , aage       bigint\n    , adatethree timestamp\n    , adatesix   timestamp(6)\n    , adatenigth timestamp(9)\n    , adtdate    date\n    , adttime    time\n\n    , afloat    float\n    , adouble   double\n    , aboolean  BOOLEAN\n    , abigint   BIGINT\n    , atinyint  TINYINT\n    , avarchar  varchar\n    , asmallint SMALLINT\n    -- , primary key (id, name) NOT ENFORCED\n) WITH (\n      'connector' = 'stream-x'\n      );\n\n\nINSERT INTO sink\nSELECT\n    u.id\n     , u.name\n     , u.money\n     , u.dateone\n     , u.age\n     , u.datethree\n     , u.datesix\n     , u.datenigth\n     , u.dtdate\n     , u.dttime\n\n     , s.id        as aid\n     , s.name      as aname\n     , s.money     as amoney\n     , s.dateone   as adateone\n     , s.age       as aage\n     , s.datethree as adatethree\n     , s.datesix   as adatesix\n     , s.datenigth as adatenigth\n     , s.dtdate    as adtdate\n     , s.dttime    as adttime\n\n     , s.afloat\n     , s.adouble\n     , s.aboolean\n     , s.abigint\n     , s.atinyint\n     , s.avarchar\n     , s.asmallint\nfrom source u\n         left join side FOR SYSTEM_TIME AS OF u.PROCTIME AS s\n                   on u.id = s.id;\n","tree":[{"label":"binlog","children":[{"label":"binlog_stream","path":"binlog_stream","category":"file"}],"category":"dir"},{"label":"cassandra","children":[{"label":"cassandra-lookup","path":"cassandra-lookup","category":"file"},{"label":"cassandra-print","path":"cassandra-print","category":"file"},{"label":"cassandra-sink","path":"cassandra-sink","category":"file"}],"category":"dir"},{"label":"clickhouse","children":[{"label":"clickhouse","path":"clickhouse","category":"file"}],"category":"dir"},{"label":"db2","children":[{"label":"db2_lookup","path":"db2_lookup","category":"file"},{"label":"db2_scan_json","path":"db2_scan_json","category":"file"},{"label":"db2_source_batch","path":"db2_source_batch","category":"file"},{"label":"db2_source_realtime","path":"db2_source_realtime","category":"file"}],"category":"dir"},{"label":"dm","children":[{"label":"dm_lookup_sink","path":"dm_lookup_sink","category":"file"},{"label":"dm_source_batch","path":"dm_source_batch","category":"file"},{"label":"dm_source_realtime","path":"dm_source_realtime","category":"file"}],"category":"dir"},{"label":"doris","children":[{"label":"kafka_doris","path":"kafka_doris","category":"file"},{"label":"kafka_doris_stream","path":"kafka_doris_stream","category":"file"},{"label":"mysql_doris","path":"mysql_doris","category":"file"},{"label":"stream-doris","path":"stream-doris","category":"file"}],"category":"dir"},{"label":"elasticsearch5","children":[{"label":"es2es","path":"es2es","category":"file"}],"category":"dir"},{"label":"elasticsearch6","children":[{"label":"es2es","path":"es2es","category":"file"},{"label":"kafka_eslookup_stream","path":"kafka_eslookup_stream","category":"file"}],"category":"dir"},{"label":"elasticsearch7","children":[{"label":"es2es","path":"es2es","category":"file"},{"label":"kafka_eslookup_stream","path":"kafka_eslookup_stream","category":"file"}],"category":"dir"},{"label":"emqx","children":[{"label":"emqx_emqx","path":"emqx_emqx","category":"file"},{"label":"kafka_emqx_upsert","path":"kafka_emqx_upsert","category":"file"}],"category":"dir"},{"label":"file","children":[{"label":"file_stream","path":"file_stream","category":"file"}],"category":"dir"},{"label":"filesystem","children":[{"label":"s3","category":"dir","children":[{"label":"s3sink","path":"s3sink","category":"file"}]}],"category":"dir"},{"label":"ftp","children":[{"label":"ftp_stream","path":"ftp_stream","category":"file"},{"label":"stream_ftp","path":"stream_ftp","category":"file"}],"category":"dir"},{"label":"gbase","children":[{"label":"gbase_lookup_stream","path":"gbase_lookup_stream","category":"file"},{"label":"gbase_stream","path":"gbase_stream","category":"file"},{"label":"stream_gbase","path":"stream_gbase","category":"file"}],"category":"dir"},{"label":"greenplum","children":[{"label":"support_type","path":"support_type","category":"file"}],"category":"dir"},{"label":"hbase","children":[{"label":"hbase2hbase","path":"hbase2hbase","category":"file"},{"label":"hbase_stream","path":"hbase_stream","category":"file"},{"label":"kafka_hbaselookup_stream","path":"kafka_hbaselookup_stream","category":"file"},{"label":"stream_hbase","path":"stream_hbase","category":"file"}],"category":"dir"},{"label":"hdfs","children":[{"label":"hdfs_orc_stream","path":"hdfs_orc_stream","category":"file"},{"label":"hdfs_parquet_stream","path":"hdfs_parquet_stream","category":"file"},{"label":"hdfs_text_stream","path":"hdfs_text_stream","category":"file"},{"label":"stream_hdfs_orc","path":"stream_hdfs_orc","category":"file"},{"label":"stream_hdfs_parquet","path":"stream_hdfs_parquet","category":"file"},{"label":"stream_hdfs_text","path":"stream_hdfs_text","category":"file"}],"category":"dir"},{"label":"hive","children":[{"label":"binlog_hive","path":"binlog_hive","category":"file"},{"label":"hive_lookup_sink","path":"hive_lookup_sink","category":"file"},{"label":"kafka_hive","path":"kafka_hive","category":"file"}],"category":"dir"},{"label":"http","children":[{"label":"http_stream","path":"http_stream","category":"file"},{"label":"stream_http","path":"stream_http","category":"file"}],"category":"dir"},{"label":"iceberg","children":[{"label":"iceberg_streaming","path":"iceberg_streaming","category":"file"}],"category":"dir"},{"label":"kafka","children":[{"label":"kafka_kafka","path":"kafka_kafka","category":"file"},{"label":"kafka_kafka_deserializer","path":"kafka_kafka_deserializer","category":"file"},{"label":"kafka_multi_line","path":"kafka_multi_line","category":"file"},{"label":"kafka_nested","path":"kafka_nested","category":"file"},{"label":"kafka_oracle_reduction","path":"kafka_oracle_reduction","category":"file"},{"label":"kafka_stream_complex","path":"kafka_stream_complex","category":"file"},{"label":"kafka_upsert-kafka","path":"kafka_upsert-kafka","category":"file"},{"label":"proto_proto","path":"proto_proto","category":"file"}],"category":"dir"},{"label":"kingbase","children":[{"label":"kingbase2kingbase","path":"kingbase2kingbase","category":"file"},{"label":"kingbase_source_batch","path":"kingbase_source_batch","category":"file"},{"label":"kingbase_source_realtime","path":"kingbase_source_realtime","category":"file"}],"category":"dir"},{"label":"kudu","children":[{"label":"kudu_source_stream","path":"kudu_source_stream","category":"file"},{"label":"mysql_kudu_kudu","path":"mysql_kudu_kudu","category":"file"},{"label":"mysql_kudu_stream","path":"mysql_kudu_stream","category":"file"}],"category":"dir"},{"label":"logminer","children":[{"label":"logminer_stream","path":"logminer_stream","category":"file"}],"category":"dir"},{"label":"mongo","children":[{"label":"all_join","path":"all_join","category":"file"},{"label":"async_join","path":"async_join","category":"file"},{"label":"sink","path":"sink","category":"file"}],"category":"dir"},{"label":"mysql","children":[{"label":"kafka_mysql_sink","path":"kafka_mysql_sink","category":"file"},{"label":"mysql_hdfs_polling","path":"mysql_hdfs_polling","category":"file"},{"label":"mysql_lookup_sink","path":"mysql_lookup_sink","category":"file"},{"label":"mysql_source_batch","path":"mysql_source_batch","category":"file"},{"label":"mysql_source_realtime","path":"mysql_source_realtime","category":"file"}],"category":"dir"},{"label":"oracle","children":[{"label":"increment","category":"dir","children":[{"label":"oracle_stream","path":"oracle_stream","category":"file"}]},{"label":"lookup","category":"dir","children":[{"label":"oracle_lookup_oracle","path":"oracle_lookup_oracle","category":"file"}]},{"label":"oracle_oracle","path":"oracle_oracle","category":"file"},{"label":"parallelism","category":"dir","children":[{"label":"oracle_oracle","path":"oracle_oracle","category":"file"}]},{"label":"polling","category":"dir","children":[{"label":"oracle_oracle","path":"oracle_oracle","category":"file"}]}],"category":"dir"},{"label":"phoenix5","children":[{"label":"hbasephoenix5_stream","path":"hbasephoenix5_stream","category":"file"},{"label":"phoenix5_phoenix5_alltype","path":"phoenix5_phoenix5_alltype","category":"file"},{"label":"phoenix5_stream","path":"phoenix5_stream","category":"file"},{"label":"phoenix5_stream_alltype","path":"phoenix5_stream_alltype","category":"file"}],"category":"dir"},{"label":"postgresql","children":[{"label":"numeric_lookup_sink","path":"numeric_lookup_sink","category":"file"},{"label":"numeric_source_batch","path":"numeric_source_batch","category":"file"},{"label":"numeric_source_realtime","path":"numeric_source_realtime","category":"file"},{"label":"without_numeric_lookup_sink","path":"without_numeric_lookup_sink","category":"file"},{"label":"without_numeric_source_batch","path":"without_numeric_source_batch","category":"file"}],"category":"dir"},{"label":"redis","children":[{"label":"lookup_redis","path":"lookup_redis","category":"file"},{"label":"stream_redis","path":"stream_redis","category":"file"}],"category":"dir"},{"label":"rocketmq","children":[{"label":"rocketmq_stream","path":"rocketmq_stream","category":"file"}],"category":"dir"},{"label":"saphana","children":[{"label":"saphana_saphana_date","path":"saphana_saphana_date","category":"file"},{"label":"saphana_saphana_lob","path":"saphana_saphana_lob","category":"file"},{"label":"saphana_saphana_num","path":"saphana_saphana_num","category":"file"},{"label":"saphana_saphana_varchar","path":"saphana_saphana_varchar","category":"file"}],"category":"dir"},{"label":"solr","children":[{"label":"solr_sink","path":"solr_sink","category":"file"}],"category":"dir"},{"label":"sqlserver","children":[{"label":"sqlserver_lookup_sink","path":"sqlserver_lookup_sink","category":"file"},{"label":"sqlserver_sqlserver","path":"sqlserver_sqlserver","category":"file"},{"label":"sqlserver_stream","path":"sqlserver_stream","category":"file"}],"category":"dir"},{"label":"sqlservercdc","children":[{"label":"sqlservercdc_stream","path":"sqlservercdc_stream","category":"file"},{"label":"sqlservercdc_stream1","path":"sqlservercdc_stream1","category":"file"}],"category":"dir"},{"label":"starrocks","children":[{"label":"mysql_starrocks","path":"mysql_starrocks","category":"file"}],"category":"dir"},{"label":"stream","children":[{"label":"stream","path":"stream","category":"file"}],"category":"dir"},{"label":"window","children":[{"label":"tumble_eventime","path":"tumble_eventime","category":"file"},{"label":"tumble_proctime","path":"tumble_proctime","category":"file"}],"category":"dir"}]},"__N_SSG":true}