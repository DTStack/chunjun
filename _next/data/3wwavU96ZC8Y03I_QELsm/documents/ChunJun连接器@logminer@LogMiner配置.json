{"pageProps":{"content":"\n              <a id=\"Oracle配置LogMiner\" style='display: block; height: 35px;'></a>\n              <h1>\n                Oracle配置LogMiner\n              </h1>\n            <p>注意：</p>\n<p>1、某个Oracle数据源能同时运行的任务数量取决于该Oracle的内存大小</p>\n<p>2、若数据量太大导致日志组频繁切换需要增加日志组数量，增大单个日志组存储大小</p>\n\n              <a id=\"一、Oracle 10g(单机版)\" style='display: block; height: 35px;'></a>\n              <h2>\n                一、Oracle 10g(单机版)\n              </h2>\n            \n              <a id=\"1、查询Oracle版本信息，这里配置的是<code>Oracle 10g</code>\" style='display: block; height: 35px;'></a>\n              <h3>\n                1、查询Oracle版本信息，这里配置的是<code>Oracle 10g</code>\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查看oracle版本</span>\n<span class=\"hljs-keyword\">select</span> *\n<span class=\"hljs-keyword\">from</span> v$<span class=\"hljs-keyword\">version</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner1.png\" alt=\"image\"></p>\n<p>本章Oracle的版本如上图所示。</p>\n\n              <a id=\"2、通过命令行方式登录Oracle，查看是否开启日志归档\" style='display: block; height: 35px;'></a>\n              <h3>\n                2、通过命令行方式登录Oracle，查看是否开启日志归档\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查询数据库归档模式</span>\narchive\n<span class=\"hljs-built_in\">log</span> <span class=\"hljs-built_in\">list</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner2.png\" alt=\"image\"></p>\n<p>图中显示<code>No Archive Mode</code>表示未开启日志归档。</p>\n\n              <a id=\"3、开启日志归档，开启日志归档需要重启数据库，请注意\" style='display: block; height: 35px;'></a>\n              <h3>\n                3、开启日志归档，开启日志归档需要重启数据库，请注意\n              </h3>\n            \n              <a id=\"a、配置归档日志保存的路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、配置归档日志保存的路径\n              </h4>\n            <p>根据自身环境配置归档日志保存路径，需要提前创建相应目录及赋予相应访问权限</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-comment\"># 创建归档日志保存目录</span>\n<span class=\"hljs-built_in\">mkdir</span> -p /data/oracle/archivelog\n\n<span class=\"hljs-comment\"># 进入Oracle目录</span>\n<span class=\"hljs-built_in\">cd</span> <span class=\"hljs-variable\">$ORACLE_HOME</span>\n\n<span class=\"hljs-comment\"># 查看Oracle权限组，本章权限组如下图所示</span>\n<span class=\"hljs-built_in\">ls</span> -l\n\n<span class=\"hljs-comment\"># 对归档日志保存目录赋予相应权限</span>\n<span class=\"hljs-built_in\">chown</span> -R 下图中的用户名:下图中的组名 /data/oracle/\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner3.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\">--配置归档日志保存的路径\nalter<span class=\"hljs-built_in\">\nsystem </span><span class=\"hljs-built_in\">set</span> <span class=\"hljs-attribute\">log_archive_dest_1</span>=<span class=\"hljs-string\">&#x27;location=/data/oracle/archivelog&#x27;</span> <span class=\"hljs-attribute\">scope</span>=spfile;\n</code></pre>\n\n              <a id=\"b、关闭数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、关闭数据库\n              </h4>\n            <pre><code class=\"language-sql\">shutdown\nimmediate<span class=\"hljs-comment\">;</span>\nstartup\nmount<span class=\"hljs-comment\">;</span>\n</code></pre>\n\n              <a id=\"c、开启日志归档\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、开启日志归档\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启日志归档</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> archivelog;\n</code></pre>\n\n              <a id=\"d、开启扩充日志\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、开启扩充日志\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启扩充日志</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> supplemental <span class=\"hljs-keyword\">log</span> data (<span class=\"hljs-keyword\">all</span>) <span class=\"hljs-keyword\">columns</span>; \n</code></pre>\n\n              <a id=\"e、开启数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                e、开启数据库\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">open</span>;\n</code></pre>\n<p>再次查询数据库归档模式，<code>Archive Mode</code>表示已开启归档模式，<code>Archive destination</code>表示归档日志储存路径。</p>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner4.png\" alt=\"image\"></p>\n\n              <a id=\"4、配置日志组\" style='display: block; height: 35px;'></a>\n              <h3>\n                4、配置日志组\n              </h3>\n            \n              <a id=\"a、查询默认日志组信息\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、查询默认日志组信息\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> v$<span class=\"hljs-built_in\">log</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner5.png\" alt=\"image\"></p>\n<p>如上图所示，日志组的默认数量为2组，大小为4194304/1024/1024 = 4MB，这意味着日志大小每达到4MB就会进行日志组的切换，切换太过频繁会导致查询出错，因此需要增加日志组数量及大小。</p>\n\n              <a id=\"b、查询日志组储存路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、查询日志组储存路径\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\nFROM v$logfile<span class=\"hljs-comment\">;</span>\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner6.png\" alt=\"image\"></p>\n<p>如上图所示，默认路径为<code>/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/</code>。</p>\n\n              <a id=\"c、新增日志组与删除原有日志组\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、新增日志组与删除原有日志组\n              </h4>\n            <p>请与DBA联系，决定是否可以删除原有日志组。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-comment\">--增加两组日志组</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">3</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo3.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">4</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo4.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n</code></pre>\n<pre><code class=\"language-sql\"><span class=\"hljs-comment\">--删除原有两组日志组，并继续新增两组日志组</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">system</span> <span class=\"hljs-keyword\">checkpoint</span>;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">system</span> switch logfile;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">drop</span>\nlogfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">drop</span>\nlogfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">2</span>;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">1</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo1.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> logfile <span class=\"hljs-keyword\">group</span> <span class=\"hljs-number\">2</span> (<span class=\"hljs-string\">&#x27;/usr/lib/oracle/xe/app/oracle/flash_recovery_area/XE/onlinelog/redo2.log&#x27;</span>) size <span class=\"hljs-number\">200</span>m;\n</code></pre>\n\n              <a id=\"d、查询创建的日志组\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、查询创建的日志组\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> v$<span class=\"hljs-built_in\">log</span>;\n<span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> v$logfile;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner7.png\" alt=\"image\"></p>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner8.png\" alt=\"image\"></p>\n\n              <a id=\"5、检查是否安装LogMiner工具\" style='display: block; height: 35px;'></a>\n              <h3>\n                5、检查是否安装LogMiner工具\n              </h3>\n            <p>Oracle10g默认已安装LogMiner工具包，通过以下命令查询：</p>\n<pre><code class=\"language-sql\">desc DBMS_LOGMNR<span class=\"hljs-comment\">;</span>\ndesc DBMS_LOGMNR_D<span class=\"hljs-comment\">;</span>\n</code></pre>\n<p>若无信息打印，则执行下列SQL初始化LogMiner工具包：</p>\n<pre><code class=\"language-sql\">@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslm.sql;\n@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslmd.sql;\n</code></pre>\n\n              <a id=\"6、创建LogMiner角色并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                6、创建LogMiner角色并赋权\n              </h3>\n            <p>其中<code>roma_logminer_privs</code>为角色名称，可根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">role</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span>\n<span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">session</span>,execute_catalog_role,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">transaction</span>,flashback <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">lock</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">dictionary</span> <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_COL$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_OBJ$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_USER$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_UID$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> select_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n</code></pre>\n\n              <a id=\"7、创建LogMiner用户并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                7、创建LogMiner用户并赋权\n              </h3>\n            <p>其中<code>roma_logminer</code>为用户名，<code>password</code>为密码，请根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-keyword\">password</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">tablespace</span> users;\n<span class=\"hljs-keyword\">grant</span> roma_logminer_privs <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">grant</span> execute_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer quota unlimited <span class=\"hljs-keyword\">on</span> users;\n</code></pre>\n\n              <a id=\"8、验证用户权限\" style='display: block; height: 35px;'></a>\n              <h3>\n                8、验证用户权限\n              </h3>\n            <p>以创建的LogMiner用户登录Oracle数据库，执行以下SQL查询权限，结果如图所示：</p>\n<pre><code class=\"language-sql\"> <span class=\"hljs-keyword\">SELECT</span> *\n <span class=\"hljs-keyword\">FROM</span> USER_ROLE_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner9.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> SESSION_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner10.png\" alt=\"image\"></p>\n<p>至此，Oracle 10g数据库LogMiner实时采集配置完毕。</p>\n\n              <a id=\"二、Oracle 11g(单机版)\" style='display: block; height: 35px;'></a>\n              <h2>\n                二、Oracle 11g(单机版)\n              </h2>\n            \n              <a id=\"1、查询Oracle版本信息，这里配置的是<code>Oracle 11g</code>\" style='display: block; height: 35px;'></a>\n              <h3>\n                1、查询Oracle版本信息，这里配置的是<code>Oracle 11g</code>\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查看oracle版本</span>\n<span class=\"hljs-keyword\">select</span> *\n<span class=\"hljs-keyword\">from</span> v$<span class=\"hljs-keyword\">version</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner11.png\" alt=\"image\"></p>\n<p>本章Oracle的版本如上图所示。</p>\n\n              <a id=\"2、通过命令行方式登录Oracle，查看是否开启日志归档\" style='display: block; height: 35px;'></a>\n              <h3>\n                2、通过命令行方式登录Oracle，查看是否开启日志归档\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查询数据库归档模式</span>\narchive\n<span class=\"hljs-built_in\">log</span> <span class=\"hljs-built_in\">list</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner12.png\" alt=\"image\"></p>\n<p>图中显示<code>No Archive Mode</code>表示未开启日志归档。</p>\n\n              <a id=\"3、开启日志归档，开启日志归档需要重启数据库，请注意\" style='display: block; height: 35px;'></a>\n              <h3>\n                3、开启日志归档，开启日志归档需要重启数据库，请注意\n              </h3>\n            \n              <a id=\"a、配置归档日志保存的路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、配置归档日志保存的路径\n              </h4>\n            <p>根据自身环境配置归档日志保存路径，需要提前创建相应目录及赋予相应访问权限</p>\n<pre><code class=\"language-sql\"> alter<span class=\"hljs-built_in\">\nsystem </span><span class=\"hljs-built_in\">set</span> <span class=\"hljs-attribute\">log_archive_dest_1</span>=<span class=\"hljs-string\">&#x27;location=/data/oracle/archivelog&#x27;</span> <span class=\"hljs-attribute\">scope</span>=spfile;\n</code></pre>\n\n              <a id=\"b、关闭数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、关闭数据库\n              </h4>\n            <pre><code class=\"language-sql\">shutdown\nimmediate<span class=\"hljs-comment\">;</span>\nstartup\nmount<span class=\"hljs-comment\">;</span>\n</code></pre>\n\n              <a id=\"c、开启日志归档\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、开启日志归档\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启日志归档</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> archivelog;\n</code></pre>\n\n              <a id=\"d、开启扩充日志\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、开启扩充日志\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启扩充日志</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> supplemental <span class=\"hljs-keyword\">log</span> data (<span class=\"hljs-keyword\">all</span>) <span class=\"hljs-keyword\">columns</span>; \n</code></pre>\n\n              <a id=\"e、开启数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                e、开启数据库\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">open</span>;\n</code></pre>\n<p>再次查询数据库归档模式，<code>Archive Mode</code>表示已开启归档模式，<code>Archive destination</code>表示归档日志储存路径。\n<img src=\"../../../website/src/images/doc/LogMiner/LogMiner13.png\" alt=\"image\"></p>\n\n              <a id=\"4、检查是否安装LogMiner工具\" style='display: block; height: 35px;'></a>\n              <h3>\n                4、检查是否安装LogMiner工具\n              </h3>\n            <p>Oracle11g默认已安装LogMiner工具包，通过以下命令查询：</p>\n<pre><code class=\"language-sql\">desc DBMS_LOGMNR<span class=\"hljs-comment\">;</span>\ndesc DBMS_LOGMNR_D<span class=\"hljs-comment\">;</span>\n</code></pre>\n<p>若无信息打印，则执行下列SQL初始化LogMiner工具包：</p>\n<pre><code class=\"language-sql\">@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslm.sql;\n@\n<span class=\"hljs-variable\">$ORACLE_HOME</span>\n<span class=\"hljs-regexp\">/rdbms/</span>admin/dbmslmd.sql;\n</code></pre>\n\n              <a id=\"5、创建LogMiner角色并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                5、创建LogMiner角色并赋权\n              </h3>\n            <p>其中<code>roma_logminer_privs</code>为角色名称，可根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">role</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span>\n<span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">session</span>,execute_catalog_role,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">transaction</span>,flashback <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">lock</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">dictionary</span> <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_COL$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_OBJ$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_USER$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_UID$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> select_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n</code></pre>\n\n              <a id=\"6、创建LogMiner用户并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                6、创建LogMiner用户并赋权\n              </h3>\n            <p>其中<code>roma_logminer</code>为用户名，<code>password</code>为密码，请根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-keyword\">password</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">tablespace</span> users;\n<span class=\"hljs-keyword\">grant</span> roma_logminer_privs <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">grant</span> execute_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer quota unlimited <span class=\"hljs-keyword\">on</span> users;\n</code></pre>\n\n              <a id=\"7、验证用户权限\" style='display: block; height: 35px;'></a>\n              <h3>\n                7、验证用户权限\n              </h3>\n            <p>以创建的LogMiner用户登录Oracle数据库，执行以下SQL查询权限，结果如图所示：</p>\n<pre><code class=\"language-sql\"> <span class=\"hljs-keyword\">SELECT</span> *\n <span class=\"hljs-keyword\">FROM</span> USER_ROLE_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner14.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> SESSION_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner15.png\" alt=\"image\"></p>\n<p>至此，Oracle 11g数据库LogMiner实时采集配置完毕。</p>\n\n              <a id=\"三、Oracle 12c(单机版非CBD)\" style='display: block; height: 35px;'></a>\n              <h2>\n                三、Oracle 12c(单机版非CBD)\n              </h2>\n            \n              <a id=\"1、查询Oracle版本信息，这里配置的是<code>Oracle 12c</code>\" style='display: block; height: 35px;'></a>\n              <h3>\n                1、查询Oracle版本信息，这里配置的是<code>Oracle 12c</code>\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查看oracle版本</span>\n<span class=\"hljs-keyword\">select</span> BANNER\n<span class=\"hljs-keyword\">from</span> v$<span class=\"hljs-keyword\">version</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner16.png\" alt=\"image\"></p>\n<p>本章Oracle的版本如上图所示。</p>\n\n              <a id=\"2、通过命令行方式登录Oracle，查看是否开启日志归档\" style='display: block; height: 35px;'></a>\n              <h3>\n                2、通过命令行方式登录Oracle，查看是否开启日志归档\n              </h3>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--查询数据库归档模式</span>\narchive\n<span class=\"hljs-built_in\">log</span> <span class=\"hljs-built_in\">list</span>;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner17.png\" alt=\"image\"></p>\n<p>图中显示<code>No Archive Mode</code>表示未开启日志归档。</p>\n\n              <a id=\"3、开启日志归档，开启日志归档需要重启数据库，请注意\" style='display: block; height: 35px;'></a>\n              <h3>\n                3、开启日志归档，开启日志归档需要重启数据库，请注意\n              </h3>\n            \n              <a id=\"a、配置归档日志保存的路径\" style='display: block; height: 35px;'></a>\n              <h4>\n                a、配置归档日志保存的路径\n              </h4>\n            <p>根据自身环境配置归档日志保存路径，需要提前创建相应目录及赋予相应访问权限</p>\n<pre><code class=\"language-sql\"> alter<span class=\"hljs-built_in\">\nsystem </span><span class=\"hljs-built_in\">set</span> <span class=\"hljs-attribute\">log_archive_dest_1</span>=<span class=\"hljs-string\">&#x27;location=/data/oracle/archivelog&#x27;</span> <span class=\"hljs-attribute\">scope</span>=spfile;\n</code></pre>\n\n              <a id=\"b、关闭数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                b、关闭数据库\n              </h4>\n            <pre><code class=\"language-sql\">shutdown\nimmediate<span class=\"hljs-comment\">;</span>\nstartup\nmount<span class=\"hljs-comment\">;</span>\n</code></pre>\n\n              <a id=\"c、开启日志归档\" style='display: block; height: 35px;'></a>\n              <h4>\n                c、开启日志归档\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启日志归档</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> archivelog;\n</code></pre>\n\n              <a id=\"d、开启扩充日志\" style='display: block; height: 35px;'></a>\n              <h4>\n                d、开启扩充日志\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-comment\">--开启扩充日志</span>\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">add</span> supplemental <span class=\"hljs-keyword\">log</span> data (<span class=\"hljs-keyword\">all</span>) <span class=\"hljs-keyword\">columns</span>; \n</code></pre>\n\n              <a id=\"e、开启数据库\" style='display: block; height: 35px;'></a>\n              <h4>\n                e、开启数据库\n              </h4>\n            <pre><code class=\"language-sql\"><span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">database</span> <span class=\"hljs-keyword\">open</span>;\n</code></pre>\n<p>再次查询数据库归档模式，<code>Archive Mode</code>表示已开启归档模式，<code>Archive destination</code>表示归档日志储存路径。\n<img src=\"../../../website/src/images/doc/LogMiner/LogMiner18.png\" alt=\"image\"></p>\n\n              <a id=\"4、创建LogMiner角色并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                4、创建LogMiner角色并赋权\n              </h3>\n            <p>其中<code>roma_logminer_privs</code>为角色名称，可根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span> <span class=\"hljs-keyword\">role</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span>\n<span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">session</span>,execute_catalog_role,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">transaction</span>,flashback <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,<span class=\"hljs-keyword\">lock</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">table</span>,logmining,<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">any</span> <span class=\"hljs-keyword\">dictionary</span> <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_COL$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_OBJ$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_USER$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> <span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">on</span> <span class=\"hljs-keyword\">SYSTEM</span>.LOGMNR_UID$ <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> select_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n<span class=\"hljs-keyword\">grant</span> LOGMINING <span class=\"hljs-keyword\">to</span> roma_logminer_privs;\n</code></pre>\n\n              <a id=\"5、创建LogMiner用户并赋权\" style='display: block; height: 35px;'></a>\n              <h3>\n                5、创建LogMiner用户并赋权\n              </h3>\n            <p>其中<code>roma_logminer</code>为用户名，<code>password</code>为密码，请根据自身需求修改。</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">create</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-keyword\">password</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">tablespace</span> users;\n<span class=\"hljs-keyword\">grant</span> roma_logminer_privs <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">grant</span> execute_catalog_role <span class=\"hljs-keyword\">to</span> roma_logminer;\n<span class=\"hljs-keyword\">alter</span>\n<span class=\"hljs-keyword\">user</span> roma_logminer quota unlimited <span class=\"hljs-keyword\">on</span> users;\n</code></pre>\n\n              <a id=\"6、验证用户权限\" style='display: block; height: 35px;'></a>\n              <h3>\n                6、验证用户权限\n              </h3>\n            <p>以创建的LogMiner用户登录Oracle数据库，执行以下SQL查询权限，结果如图所示：</p>\n<pre><code class=\"language-sql\"> <span class=\"hljs-keyword\">SELECT</span> *\n <span class=\"hljs-keyword\">FROM</span> USER_ROLE_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner19.png\" alt=\"image\"></p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> *\n<span class=\"hljs-keyword\">FROM</span> SESSION_PRIVS;\n</code></pre>\n<p><img src=\"../../../website/src/images/doc/LogMiner/LogMiner20.png\" alt=\"image\"></p>\n<p>至此，Oracle 12c数据库LogMiner实时采集配置完毕。</p>\n","tree":[{"label":"ChunJun通用配置详解","category":"file"},{"label":"快速开始","category":"file"},{"label":"ChunJun拓展数据格式","children":[{"label":"protobuf-x","path":"protobuf-x","category":"file"}],"category":"dir"},{"label":"ChunJun连接器","children":[{"label":"binlog","category":"dir","children":[{"label":"binlog-source","path":"binlog-source","category":"file"}]},{"label":"clickhouse","category":"dir","children":[{"label":"clickhouse-lookup","path":"clickhouse-lookup","category":"file"},{"label":"clickhouse-sink","path":"clickhouse-sink","category":"file"},{"label":"clickhouse-source","path":"clickhouse-source","category":"file"}]},{"label":"db2","category":"dir","children":[{"label":"db2-lookup","path":"db2-lookup","category":"file"},{"label":"db2-sink","path":"db2-sink","category":"file"},{"label":"db2-source","path":"db2-source","category":"file"}]},{"label":"dm","category":"dir","children":[{"label":"dm-sink","path":"dm-sink","category":"file"},{"label":"dm-source","path":"dm-source","category":"file"}]},{"label":"doris","category":"dir","children":[{"label":"dorisbatch-sink","path":"dorisbatch-sink","category":"file"}]},{"label":"elasticsearch","category":"dir","children":[{"label":"es7-lookup","path":"es7-lookup","category":"file"},{"label":"es7-sink","path":"es7-sink","category":"file"},{"label":"es7-source","path":"es7-source","category":"file"}]},{"label":"gbase","category":"dir","children":[{"label":"gbase-lookup","path":"gbase-lookup","category":"file"},{"label":"gbase-sink","path":"gbase-sink","category":"file"},{"label":"gbase-source","path":"gbase-source","category":"file"}]},{"label":"greenplum","category":"dir","children":[{"label":"greenplum-sink","path":"greenplum-sink","category":"file"},{"label":"greenplum-source","path":"greenplum-source","category":"file"}]},{"label":"hbase","category":"dir","children":[{"label":"hbase-lookup","path":"hbase-lookup","category":"file"},{"label":"hbase-sink","path":"hbase-sink","category":"file"},{"label":"hbase-source","path":"hbase-source","category":"file"}]},{"label":"hdfs","category":"dir","children":[{"label":"hdfs-sink","path":"hdfs-sink","category":"file"},{"label":"hdfs-source","path":"hdfs-source","category":"file"}]},{"label":"hive","category":"dir","children":[{"label":"hive-lookup","path":"hive-lookup","category":"file"},{"label":"hive-sink","path":"hive-sink","category":"file"}]},{"label":"influxdb","category":"dir","children":[{"label":"influxdb-sink","path":"influxdb-sink","category":"file"},{"label":"influxdb-source","path":"influxdb-source","category":"file"}]},{"label":"kafka","category":"dir","children":[{"label":"kafka-sink","path":"kafka-sink","category":"file"},{"label":"kafka-source","path":"kafka-source","category":"file"}]},{"label":"kingbase","category":"dir","children":[{"label":"kingbase-sink","path":"kingbase-sink","category":"file"},{"label":"kingbase-source","path":"kingbase-source","category":"file"}]},{"label":"kudu","category":"dir","children":[{"label":"kudu-lookup","path":"kudu-lookup","category":"file"},{"label":"kudu-sink","path":"kudu-sink","category":"file"},{"label":"kudu-source","path":"kudu-source","category":"file"}]},{"label":"logminer","category":"dir","children":[{"label":"LogMiner-source","path":"LogMiner-source","category":"file"},{"label":"LogMiner原理","path":"LogMiner原理","category":"file"},{"label":"LogMiner配置","path":"LogMiner配置","category":"file"}]},{"label":"mongodb","category":"dir","children":[{"label":"mongodb-lookup","path":"mongodb-lookup","category":"file"},{"label":"mongodb-sink","path":"mongodb-sink","category":"file"},{"label":"mongodb-source","path":"mongodb-source","category":"file"}]},{"label":"mysql","category":"dir","children":[{"label":"mysql-lookup","path":"mysql-lookup","category":"file"},{"label":"mysql-sink","path":"mysql-sink","category":"file"},{"label":"mysql-source","path":"mysql-source","category":"file"}]},{"label":"oracle","category":"dir","children":[{"label":"oracle-lookup","path":"oracle-lookup","category":"file"},{"label":"oracle-sink","path":"oracle-sink","category":"file"},{"label":"oracle-source","path":"oracle-source","category":"file"}]},{"label":"pgwal","category":"dir","children":[{"label":"Postgres-CDC","path":"Postgres-CDC","category":"file"}]},{"label":"postgresql","category":"dir","children":[{"label":"postgres-lookup","path":"postgres-lookup","category":"file"},{"label":"postgres-sink","path":"postgres-sink","category":"file"},{"label":"postgres-source","path":"postgres-source","category":"file"}]},{"label":"rocketmq","category":"dir","children":[{"label":"rocketmq-source","path":"rocketmq-source","category":"file"}]},{"label":"saphana","category":"dir","children":[{"label":"saphana-sink","path":"saphana-sink","category":"file"},{"label":"saphana-source","path":"saphana-source","category":"file"}]},{"label":"sqlserver","category":"dir","children":[{"label":"sqlserver-lookup","path":"sqlserver-lookup","category":"file"},{"label":"sqlserver-sink","path":"sqlserver-sink","category":"file"},{"label":"sqlserver-source","path":"sqlserver-source","category":"file"}]},{"label":"sqlservercdc","category":"dir","children":[{"label":"SqlServer CDC实时采集原理","path":"SqlServer CDC实时采集原理","category":"file"},{"label":"SqlServer配置CDC","path":"SqlServer配置CDC","category":"file"},{"label":"SqlserverCDC-source","path":"SqlserverCDC-source","category":"file"}]}],"category":"dir"},{"label":"开发者指南","children":[{"label":"如何提交一个优秀的PR","path":"如何提交一个优秀的PR","category":"file"},{"label":"如何自定义插件","path":"如何自定义插件","category":"file"}],"category":"dir"},{"label":"拓展功能","children":[{"label":"增量同步介绍","path":"增量同步介绍","category":"file"},{"label":"断点续传介绍","path":"断点续传介绍","category":"file"},{"label":"脏数据插件设计","path":"脏数据插件设计","category":"file"}],"category":"dir"}],"toc":[{"text":"Oracle配置LogMiner","level":1,"id":"5aa66670-fe35-43c2-b62a-296b0b89396e"},{"text":"一、Oracle 10g(单机版)","level":2,"id":"67133a97-d345-4dad-bd98-315f61624033"},{"text":"1、查询Oracle版本信息，这里配置的是<code>Oracle 10g</code>","level":3,"id":"6bd8f9ee-f14d-4e7f-ad0f-6a3b619a6581"},{"text":"2、通过命令行方式登录Oracle，查看是否开启日志归档","level":3,"id":"bc398538-4f0c-475d-bd6d-5058539f6770"},{"text":"3、开启日志归档，开启日志归档需要重启数据库，请注意","level":3,"id":"565ef36a-f9e9-4089-87da-a36f6c7619b3"},{"text":"a、配置归档日志保存的路径","level":4,"id":"a090b60a-5604-4480-aa4b-5c7717b40b47"},{"text":"b、关闭数据库","level":4,"id":"8a07df78-3dd7-406a-9650-098fed60ac44"},{"text":"c、开启日志归档","level":4,"id":"b1c28e49-2da5-4c5a-b8ef-536ae53b6f0d"},{"text":"d、开启扩充日志","level":4,"id":"dbdec152-212c-4f25-b0ab-08a2c028a18f"},{"text":"e、开启数据库","level":4,"id":"f865226c-156f-4575-8e1b-039bf1b3817d"},{"text":"4、配置日志组","level":3,"id":"568d8114-2dfd-4d1d-b67f-1b2f99c3e5aa"},{"text":"a、查询默认日志组信息","level":4,"id":"9c8c28ca-089b-4837-820a-3c1a1f996ecc"},{"text":"b、查询日志组储存路径","level":4,"id":"c049b932-9470-40f4-973c-d7b95f7475f8"},{"text":"c、新增日志组与删除原有日志组","level":4,"id":"aa49fbf0-1633-4421-8bc4-423564a1dab0"},{"text":"d、查询创建的日志组","level":4,"id":"2e43e740-5a5f-4b4c-a9bf-2583c5999274"},{"text":"5、检查是否安装LogMiner工具","level":3,"id":"69dd3030-cd3f-4473-9a92-e8e274ce5761"},{"text":"6、创建LogMiner角色并赋权","level":3,"id":"dd7a0501-deb0-43ef-8ce3-6daff4d3a632"},{"text":"7、创建LogMiner用户并赋权","level":3,"id":"ef3a442a-5e08-4231-9ce6-389c2cb38290"},{"text":"8、验证用户权限","level":3,"id":"e4a41f36-641d-4be5-972f-cd6e5def88e6"},{"text":"二、Oracle 11g(单机版)","level":2,"id":"78743fa8-9dde-41f5-884d-a91d6883e103"},{"text":"1、查询Oracle版本信息，这里配置的是<code>Oracle 11g</code>","level":3,"id":"c41f9cad-947a-42ce-be70-7b3adc5aa4b8"},{"text":"2、通过命令行方式登录Oracle，查看是否开启日志归档","level":3,"id":"3a422984-4c08-4d52-b146-e25b70d37fd2"},{"text":"3、开启日志归档，开启日志归档需要重启数据库，请注意","level":3,"id":"f1a6360a-c56a-4a2f-8174-3d97544cb1f6"},{"text":"a、配置归档日志保存的路径","level":4,"id":"a675ff9b-754e-4fee-9d68-6367fd702153"},{"text":"b、关闭数据库","level":4,"id":"f26b397a-ea26-41d7-8550-e49913a00521"},{"text":"c、开启日志归档","level":4,"id":"9f3525ec-baa3-4d0c-b222-fac6f1647ac9"},{"text":"d、开启扩充日志","level":4,"id":"7de0c5b5-b74d-4b4b-a606-801bf2da317b"},{"text":"e、开启数据库","level":4,"id":"c1a5de1d-aa92-4a8a-8db1-5bfa7e099e36"},{"text":"4、检查是否安装LogMiner工具","level":3,"id":"8e38fa68-8ac8-46f1-ac6d-fcc1a36e3c7d"},{"text":"5、创建LogMiner角色并赋权","level":3,"id":"1f344e21-24e9-438a-98f7-1bf8ded9438f"},{"text":"6、创建LogMiner用户并赋权","level":3,"id":"e98d757c-4d0e-4656-807c-cc678bbd33e2"},{"text":"7、验证用户权限","level":3,"id":"b3d03b0a-735b-4731-b96c-3d73dd561212"},{"text":"三、Oracle 12c(单机版非CBD)","level":2,"id":"a841b3fe-141b-45c5-9062-beef765a9e70"},{"text":"1、查询Oracle版本信息，这里配置的是<code>Oracle 12c</code>","level":3,"id":"1b7608b6-c61f-4ff1-91ed-9e3e7809d9a5"},{"text":"2、通过命令行方式登录Oracle，查看是否开启日志归档","level":3,"id":"0e674e36-96bd-46bf-a7c8-0996a235818b"},{"text":"3、开启日志归档，开启日志归档需要重启数据库，请注意","level":3,"id":"58bef6c3-94e7-4b91-b835-999516b73b42"},{"text":"a、配置归档日志保存的路径","level":4,"id":"c07d1adf-9975-4d1a-a488-8db90a49f91d"},{"text":"b、关闭数据库","level":4,"id":"37018ebf-c87f-4994-8155-eb22a13b53d5"},{"text":"c、开启日志归档","level":4,"id":"fd0c1717-c124-4ce1-bcce-b6b7c4010559"},{"text":"d、开启扩充日志","level":4,"id":"7461d4b0-9a84-442d-a062-5a753bc85596"},{"text":"e、开启数据库","level":4,"id":"0ba6e906-49f5-4dbd-a953-e49f54d74a5c"},{"text":"4、创建LogMiner角色并赋权","level":3,"id":"b6be1a03-be9a-4055-a17a-449ddea0b550"},{"text":"5、创建LogMiner用户并赋权","level":3,"id":"852d8707-64e4-491a-b821-0e49bf670ece"},{"text":"6、验证用户权限","level":3,"id":"5d542b70-ec36-4733-b395-07e9dc4e5263"}]},"__N_SSG":true}