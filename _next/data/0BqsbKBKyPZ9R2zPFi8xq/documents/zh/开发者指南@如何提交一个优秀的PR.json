{"pageProps":{"content":"\n              <a id=\"如何提交一个优秀的 pr\" style='display: block; height: 35px;'></a>\n              <h1>\n                如何提交一个优秀的 pr\n              </h1>\n            <p>在 github 上提交 pr 是参与 ChunJun 开源项目的一个重要途径，小伙伴们在使用中的一些功能上 feature 或者 bug 都可以向社区提交 pr 贡献代码，也可以根据已有的 issue 提供自己的解决方案。下面给大家带来提交一个优秀 PR 的步骤。</p>\n\n              <a id=\"第一步：fork chunjun 到自己的 github 仓库\" style='display: block; height: 35px;'></a>\n              <h2>\n                第一步：fork chunjun 到自己的 github 仓库\n              </h2>\n            <p><img src=\"/chunjun/doc/pr/pr1.png\" alt=\"image\"></p>\n<p>点击 fork 后就可以在自己仓库中看到以你名字命名的 chunjun 项目了：</p>\n<p><img src=\"/chunjun/doc/pr/pr2.png\" alt=\"image\"></p>\n\n              <a id=\"第二步：clone chunjun 到本地 IDE\" style='display: block; height: 35px;'></a>\n              <h2>\n                第二步：clone chunjun 到本地 IDE\n              </h2>\n            <p><img src=\"/chunjun/doc/pr/pr3.png\" alt=\"image\"></p>\n\n              <a id=\"第三步：将 DTStack/chunjun 设置为本地仓库的远程分支 upstream\" style='display: block; height: 35px;'></a>\n              <h2>\n                第三步：将 DTStack/chunjun 设置为本地仓库的远程分支 upstream\n              </h2>\n            <pre><code class=\"language-shell\">$ cd chunjun\n<span class=\"hljs-comment\"># add upstream</span>\n$ git remote add upstream https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/DTStack/</span>chunjun.git\n<span class=\"hljs-comment\"># 查看远程仓库设置</span>\n$ git remote -v\norigin  https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/your_name/</span>chunjun.git (fetch)\norigin  https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/your_name/</span>chunjun.git (push)\nupstream    https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/DTStack/</span>chunjun.git (fetch)\nupstream    https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/DTStack/</span>chunjun.git (push)\n</code></pre>\n\n              <a id=\"第四步：提交代码\" style='display: block; height: 35px;'></a>\n              <h2>\n                第四步：提交代码\n              </h2>\n            <p>任何一个提交都要基于最新的分支\n<strong>切换分支</strong></p>\n<pre><code class=\"language-shell\"><span class=\"hljs-comment\"># Fetch branches from upstream.</span>\n<span class=\"hljs-variable\">$ </span>git remote update upstream -p\n<span class=\"hljs-comment\"># Checkout a new branch.</span>\n<span class=\"hljs-variable\">$ </span>git checkout -b branch_name\n<span class=\"hljs-comment\"># Pull latest code into your own branch.</span>\n<span class=\"hljs-variable\">$ </span>git pull upstream <span class=\"hljs-symbol\">master:</span>branch_name\n</code></pre>\n<p><strong>本地修改代码后，提交 commit</strong></p>\n<ul>\n<li>commit message 规范：\n[commit_type-#issue-id] [module] message</li>\n<li>commit_type:<ul>\n<li>feat：表示是一个新功能（feature)</li>\n<li>hotfix：hotfix，修补 bug</li>\n<li>docs：改动、增加文档</li>\n<li>opt：修改代码风格及 opt imports 这些，不改动原有执行的代码</li>\n<li>test：增加测试</li>\n</ul>\n</li>\n<li>eg:[hotfix-#12345][mysql] Fix mysql time type loses precision.</li>\n</ul>\n<p>注意：\n（1）commit 需遵循规范，给维护者减少维护成本及工作量，对于不符合规范的 commit，我们不与合并；\n（2）对于解决同一个 Issue 的 PR，只能存在一个 commit message，如果出现多次提交的 message，我们希望你能将 commit message &#39;squash&#39; 成一个；\n（3）message 尽量保持清晰简洁，但是也千万不要因为过度追求简洁导致描述不清楚，如果有必要，我们也不介意 message 过长，前提是，能够把解决方案、修复内容描述清楚；</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-comment\"># 提交commit前先进行代码格式化</span>\n<span class=\"hljs-variable\">$ </span>mvn <span class=\"hljs-symbol\">spotless:</span>apply\n<span class=\"hljs-variable\">$ </span>git commit -a -m <span class=\"hljs-string\">&quot;&lt;you_commit_message&gt;&quot;</span>\n</code></pre>\n<p><strong>rebase 远程分支</strong></p>\n<p>这一步很重要，因为我们仓库中的 chunjun 代码很有可能已经落后于社区，所以在 push commit 前需要 rebase，保证当前 commit 是基于社区最新的代码，很多小伙伴没有这一步导致提交的 pr 当中包含了其他人的 commit</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">$ </span><span class=\"language-bash\">git fetch upstream</span>\n<span class=\"hljs-meta prompt_\">$ </span><span class=\"language-bash\">git rebase upstream/branch_name</span>\n</code></pre>\n<p>*rebase 后有可能出现代码冲突，一般是由于多人编辑同一个文件引起的，只需要根据提示打开冲突文件对冲突部分进行修改，将提示的冲突文件的冲突都解决后，执行</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">$ </span><span class=\"language-bash\">git add .</span>\n<span class=\"hljs-meta prompt_\">$ </span><span class=\"language-bash\">git rebase --<span class=\"hljs-built_in\">continue</span></span>\n</code></pre>\n<p>依此往复，直至屏幕出现类似 rebase successful 字样即可</p>\n<p>*rebase 之后代码可能无法正常推送，需要<code>git push -f</code> 强制推送，强制推送是一个有风险的操作，操作前请仔细检查以避免出现无关代码被强制覆盖的问题</p>\n<p><strong>push 到 github 仓库</strong></p>\n<pre><code class=\"language-shell\">$ git <span class=\"hljs-built_in\">push</span> <span class=\"hljs-built_in\">origin</span> branch_name\n</code></pre>\n\n              <a id=\"第五步：提交 pr\" style='display: block; height: 35px;'></a>\n              <h2>\n                第五步：提交 pr\n              </h2>\n            <p>以笔者修复 kafka 写入过程中出现空指针问题为例，经过步骤四笔者已经把代码提交至笔者自己仓库的 master 分支</p>\n<p><img src=\"/chunjun/doc/pr/pr4.png\" alt=\"image\"></p>\n<p>进入 chunjun 仓库页面，点击 Pull Request</p>\n<p><img src=\"/chunjun/doc/pr/pr5.png\" alt=\"image\"></p>\n<p><img src=\"/chunjun/doc/pr/pr6.png\" alt=\"image\"></p>\n<p>选择 head 仓库和 base 仓库以及相应的分支</p>\n<p><img src=\"/chunjun/doc/pr/pr7.png\" alt=\"image\"></p>\n<p>填写 pr 信息，pr 信息应该尽量概括清楚问题的前因后果，如果存在对应 issue 要附加 issue 地址，保证问题是可追溯的</p>\n<p><img src=\"/chunjun/doc/pr/pr8.png\" alt=\"image\"></p>\n<p><img src=\"/chunjun/doc/pr/pr9.png\" alt=\"image\"></p>\n<p>PR 提交成功后需要一段时间代码 review，可以耐心等待一下项目维护者 review 后合入，或者在 PR 评论区艾特相关人员。</p>\n","tree":[{"label":"ChunJun通用配置详解","category":"file"},{"label":"快速开始","category":"file"},{"label":"ChunJun拓展数据格式","children":[{"label":"protobuf-x","path":"protobuf-x","category":"file"}],"category":"dir"},{"label":"ChunJun连接器","children":[{"label":"binlog","category":"dir","children":[{"label":"binlog-source","path":"binlog-source","category":"file"}]},{"label":"clickhouse","category":"dir","children":[{"label":"clickhouse-lookup","path":"clickhouse-lookup","category":"file"},{"label":"clickhouse-sink","path":"clickhouse-sink","category":"file"},{"label":"clickhouse-source","path":"clickhouse-source","category":"file"}]},{"label":"db2","category":"dir","children":[{"label":"db2-lookup","path":"db2-lookup","category":"file"},{"label":"db2-sink","path":"db2-sink","category":"file"},{"label":"db2-source","path":"db2-source","category":"file"}]},{"label":"dm","category":"dir","children":[{"label":"dm-sink","path":"dm-sink","category":"file"},{"label":"dm-source","path":"dm-source","category":"file"}]},{"label":"doris","category":"dir","children":[{"label":"dorisbatch-sink","path":"dorisbatch-sink","category":"file"}]},{"label":"elasticsearch","category":"dir","children":[{"label":"es7-lookup","path":"es7-lookup","category":"file"},{"label":"es7-sink","path":"es7-sink","category":"file"},{"label":"es7-source","path":"es7-source","category":"file"}]},{"label":"gbase","category":"dir","children":[{"label":"gbase-lookup","path":"gbase-lookup","category":"file"},{"label":"gbase-sink","path":"gbase-sink","category":"file"},{"label":"gbase-source","path":"gbase-source","category":"file"}]},{"label":"greenplum","category":"dir","children":[{"label":"greenplum-sink","path":"greenplum-sink","category":"file"},{"label":"greenplum-source","path":"greenplum-source","category":"file"}]},{"label":"hbase","category":"dir","children":[{"label":"hbase-lookup","path":"hbase-lookup","category":"file"},{"label":"hbase-sink","path":"hbase-sink","category":"file"},{"label":"hbase-source","path":"hbase-source","category":"file"}]},{"label":"hdfs","category":"dir","children":[{"label":"hdfs-sink","path":"hdfs-sink","category":"file"},{"label":"hdfs-source","path":"hdfs-source","category":"file"}]},{"label":"hive","category":"dir","children":[{"label":"hive-lookup","path":"hive-lookup","category":"file"},{"label":"hive-sink","path":"hive-sink","category":"file"}]},{"label":"influxdb","category":"dir","children":[{"label":"influxdb-sink","path":"influxdb-sink","category":"file"},{"label":"influxdb-source","path":"influxdb-source","category":"file"}]},{"label":"kafka","category":"dir","children":[{"label":"kafka-sink","path":"kafka-sink","category":"file"},{"label":"kafka-source","path":"kafka-source","category":"file"}]},{"label":"kingbase","category":"dir","children":[{"label":"kingbase-sink","path":"kingbase-sink","category":"file"},{"label":"kingbase-source","path":"kingbase-source","category":"file"}]},{"label":"kudu","category":"dir","children":[{"label":"kudu-lookup","path":"kudu-lookup","category":"file"},{"label":"kudu-sink","path":"kudu-sink","category":"file"},{"label":"kudu-source","path":"kudu-source","category":"file"}]},{"label":"logminer","category":"dir","children":[{"label":"LogMiner-source","path":"LogMiner-source","category":"file"},{"label":"LogMiner原理","path":"LogMiner原理","category":"file"},{"label":"LogMiner配置","path":"LogMiner配置","category":"file"}]},{"label":"mongodb","category":"dir","children":[{"label":"mongodb-lookup","path":"mongodb-lookup","category":"file"},{"label":"mongodb-sink","path":"mongodb-sink","category":"file"},{"label":"mongodb-source","path":"mongodb-source","category":"file"}]},{"label":"mysql","category":"dir","children":[{"label":"mysql-lookup","path":"mysql-lookup","category":"file"},{"label":"mysql-sink","path":"mysql-sink","category":"file"},{"label":"mysql-source","path":"mysql-source","category":"file"}]},{"label":"oracle","category":"dir","children":[{"label":"oracle-lookup","path":"oracle-lookup","category":"file"},{"label":"oracle-sink","path":"oracle-sink","category":"file"},{"label":"oracle-source","path":"oracle-source","category":"file"}]},{"label":"pgwal","category":"dir","children":[{"label":"Postgres-CDC","path":"Postgres-CDC","category":"file"}]},{"label":"postgresql","category":"dir","children":[{"label":"postgres-lookup","path":"postgres-lookup","category":"file"},{"label":"postgres-sink","path":"postgres-sink","category":"file"},{"label":"postgres-source","path":"postgres-source","category":"file"}]},{"label":"rocketmq","category":"dir","children":[{"label":"rocketmq-source","path":"rocketmq-source","category":"file"}]},{"label":"saphana","category":"dir","children":[{"label":"saphana-sink","path":"saphana-sink","category":"file"},{"label":"saphana-source","path":"saphana-source","category":"file"}]},{"label":"sqlserver","category":"dir","children":[{"label":"sqlserver-lookup","path":"sqlserver-lookup","category":"file"},{"label":"sqlserver-sink","path":"sqlserver-sink","category":"file"},{"label":"sqlserver-source","path":"sqlserver-source","category":"file"}]},{"label":"sqlservercdc","category":"dir","children":[{"label":"SqlServer CDC实时采集原理","path":"SqlServer CDC实时采集原理","category":"file"},{"label":"SqlServer配置CDC","path":"SqlServer配置CDC","category":"file"},{"label":"SqlserverCDC-source","path":"SqlserverCDC-source","category":"file"}]}],"category":"dir"},{"label":"开发者指南","children":[{"label":"如何提交一个优秀的PR","path":"如何提交一个优秀的PR","category":"file"},{"label":"如何自定义插件","path":"如何自定义插件","category":"file"}],"category":"dir"},{"label":"拓展功能","children":[{"label":"增量同步介绍","path":"增量同步介绍","category":"file"},{"label":"断点续传介绍","path":"断点续传介绍","category":"file"},{"label":"脏数据插件设计","path":"脏数据插件设计","category":"file"}],"category":"dir"}],"toc":[{"text":"如何提交一个优秀的 pr","level":1,"id":"cbe3fdc8-a222-4e80-bd6b-1851fe9f2314"},{"text":"第一步：fork chunjun 到自己的 github 仓库","level":2,"id":"ce67d6a9-3072-4475-a240-6254af9303f6"},{"text":"第二步：clone chunjun 到本地 IDE","level":2,"id":"e0969729-e568-4b8e-91cc-ef8a53401816"},{"text":"第三步：将 DTStack/chunjun 设置为本地仓库的远程分支 upstream","level":2,"id":"437e75be-d74a-41c5-903b-52010f47b6ef"},{"text":"第四步：提交代码","level":2,"id":"64f903c7-4fb5-4789-bc47-1d9597aeedf6"},{"text":"第五步：提交 pr","level":2,"id":"78dd387a-3929-4eb1-8840-5927d9366610"}]},"__N_SSG":true}