{"pageProps":{"content":"\n              <a id=\"Clickhouse Source\" style='display: block; height: 35px;'></a>\n              <h1>\n                Clickhouse Source\n              </h1>\n            \n              <a id=\"一、介绍\" style='display: block; height: 35px;'></a>\n              <h2>\n                一、介绍\n              </h2>\n            <p>clickhouse source</p>\n\n              <a id=\"二、支持版本\" style='display: block; height: 35px;'></a>\n              <h2>\n                二、支持版本\n              </h2>\n            <p>ClickHouse 19.x及以上</p>\n\n              <a id=\"三、插件名称\" style='display: block; height: 35px;'></a>\n              <h2>\n                三、插件名称\n              </h2>\n            <table>\n<thead>\n<tr>\n<th>SYNC</th>\n<th>clickhousesource, clickhousereader</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>SQL</td>\n<td>clickhouse-x</td>\n</tr>\n</tbody></table>\n\n              <a id=\"四、参数说明\" style='display: block; height: 35px;'></a>\n              <h2>\n                四、参数说明\n              </h2>\n            \n              <a id=\"1、sync\" style='display: block; height: 35px;'></a>\n              <h3>\n                1、sync\n              </h3>\n            <ul>\n<li><strong>connection</strong><ul>\n<li>描述：数据库连接参数，包含jdbcUrl、schema、table参数</li>\n<li>必选：是</li>\n<li>字段类型：List</li>\n<li>默认值：无<ul>\n<li>示例：指定jdbcUrl、schema、table</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<pre><code class=\"language-json\"><span class=\"hljs-string\">&quot;connection&quot;</span>: [{\n     <span class=\"hljs-string\">&quot;jdbcUrl&quot;</span>: [<span class=\"hljs-string\">&quot;jdbc:clickhouse://localhost:8123/default&quot;</span>],\n       <span class=\"hljs-string\">&quot;schema&quot;</span>: <span class=\"hljs-string\">&quot;public&quot;</span>,\n     <span class=\"hljs-string\">&quot;table&quot;</span>: [<span class=\"hljs-string\">&quot;table&quot;</span>]\n    }]\n</code></pre>\n<br />\n\n<ul>\n<li><p><strong>jdbcUrl</strong></p>\n<ul>\n<li>描述：clickhouse jdbc url，详情参考<a href=\"https://github.com/ClickHouse/clickhouse-jdbc\">clickhouse-jdbc官方文档</a></li>\n<li>必选：是</li>\n<li>字段类型：List</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>schema</strong></p>\n<ul>\n<li>描述：数据库schema名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>table</strong></p>\n<ul>\n<li>描述：目的表的表名称。目前只支持配置单个表，后续会支持多表</li>\n<li>必选：是</li>\n<li>字段类型：List</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>username</strong></p>\n<ul>\n<li>描述：数据源的用户名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>password</strong></p>\n<ul>\n<li>描述：数据源指定用户名的密码</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>where</strong></p>\n<ul>\n<li>描述：筛选条件，reader插件根据指定的column、table、where条件拼接SQL，并根据这个SQL进行数据抽取。在实际业务场景中，往往会选择当天的数据进行同步，可以将where条件指定为gmt_create &gt; time。</li>\n<li>注意：不可以将where条件指定为limit 10，limit不是SQL的合法where子句。</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>splitPk</strong></p>\n<ul>\n<li>描述：当speed配置中的channel大于1时指定此参数，Reader插件根据并发数和此参数指定的字段拼接sql，使每个并发读取不同的数据，提升读取速率。</li>\n<li>注意:<ul>\n<li>推荐splitPk使用表主键，因为表主键通常情况下比较均匀，因此切分出来的分片也不容易出现数据热点。</li>\n<li>目前splitPk仅支持整形数据切分，<code>不支持浮点、字符串、日期等其他类型</code>。如果用户指定其他非支持类型，ChunJun将报错！</li>\n<li>如果channel大于1但是没有配置此参数，任务将置为失败。</li>\n</ul>\n</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>fetchSize</strong></p>\n<ul>\n<li>描述：一次性从数据库中读取多少条数据，jdbc默认一次将所有结果都读取到内存中，在数据量很大时可能会造成OOM，设置这个参数可以控制每次读取fetchSize条数据。</li>\n<li>注意：此参数的值不可设置过大，否则会读取超时，导致任务失败。</li>\n<li>必选：否</li>\n<li>字段类型：int</li>\n<li>默认值：1024<br /></li>\n</ul>\n</li>\n<li><p><strong>queryTimeOut</strong></p>\n<ul>\n<li>描述：查询超时时间，单位秒。</li>\n<li>注意：当数据量很大，或者从视图查询，或者自定义sql查询时，可通过此参数指定超时时间。</li>\n<li>必选：否</li>\n<li>字段类型：int</li>\n<li>默认值：300<br /></li>\n</ul>\n</li>\n<li><p><strong>customSql</strong></p>\n<ul>\n<li>描述：自定义的查询语句，如果只指定字段不能满足需求时，可通过此参数指定查询的sql，可以是任意复杂的查询语句。</li>\n<li>注意：<ul>\n<li>只能是查询语句，否则会导致任务失败；</li>\n<li>查询语句返回的字段需要和column列表里的字段对应；</li>\n<li>当指定了此参数时，connection里指定的table无效；</li>\n<li>当指定此参数时，column必须指定具体字段信息，不能以*号代替；</li>\n</ul>\n</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>withNoLock</strong></p>\n<ul>\n<li>描述：是否在sql语句后面添加 with(nolock)</li>\n<li>必选：否</li>\n<li>字段类型：Boolean</li>\n<li>默认值：false\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>column</strong></p>\n<ul>\n<li>描述：需要读取的字段。</li>\n<li>格式：支持3中格式<br />1.读取全部字段，如果字段数量很多，可以使用下面的写法：</li>\n</ul>\n</li>\n</ul>\n<pre><code class=\"language-bash\"><span class=\"hljs-string\">&quot;column&quot;</span>:[<span class=\"hljs-string\">&quot;*&quot;</span>]\n</code></pre>\n<ul>\n<li>2.只指定字段名称：</li>\n</ul>\n<pre><code><span class=\"hljs-string\">&quot;column&quot;</span>:[<span class=\"hljs-string\">&quot;id&quot;</span>,<span class=\"hljs-string\">&quot;name&quot;</span>]\n</code></pre>\n<ul>\n<li>3.指定具体信息：</li>\n</ul>\n<pre><code class=\"language-json\"><span class=\"hljs-string\">&quot;column&quot;</span>: [{\n    <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;col&quot;</span>,\n    <span class=\"hljs-string\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;datetime&quot;</span>,\n    <span class=\"hljs-string\">&quot;format&quot;</span>: <span class=\"hljs-string\">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>,\n    <span class=\"hljs-string\">&quot;value&quot;</span>: <span class=\"hljs-string\">&quot;value&quot;</span>\n}]\n</code></pre>\n<ul>\n<li><p>属性说明:</p>\n<ul>\n<li>name：字段名称</li>\n<li>type：字段类型，可以和数据库里的字段类型不一样，程序会做一次类型转换</li>\n<li>format：如果字段是时间字符串，可以指定时间的格式，将字段类型转为日期格式返回</li>\n<li>value：如果数据库里不存在指定的字段，则会把value的值作为常量列返回，如果指定的字段存在，当指定字段的值为null时，会以此value值作为默认值返回</li>\n</ul>\n</li>\n<li><p>必选：是</p>\n</li>\n<li><p>字段类型：List</p>\n</li>\n<li><p>默认值：无</p>\n<br />\n</li>\n<li><p><strong>polling</strong></p>\n<ul>\n<li>描述：是否开启间隔轮询，开启后会根据<code>pollingInterval</code>轮询间隔时间周期性的从数据库拉取数据。开启间隔轮询还需配置参数<code>pollingInterval</code>，<code>increColumn</code>，可以选择配置参数<code>startLocation</code>。若不配置参数<code>startLocation</code>，任务启动时将会从数据库中查询增量字段最大值作为轮询的开始位置。</li>\n<li>必选：否</li>\n<li>字段类型：Boolean</li>\n<li>默认值：false<br /></li>\n</ul>\n</li>\n<li><p><strong>pollingInterval</strong></p>\n<ul>\n<li>描述：轮询间隔时间，从数据库中拉取数据的间隔时间，默认为5000毫秒。</li>\n<li>必选：否</li>\n<li>字段类型：long</li>\n<li>默认值：5000\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>increColumn</strong></p>\n<ul>\n<li>增量字段，可以是对应的增量字段名，也可以是纯数字，表示增量字段在column中的顺序位置（从0开始）</li>\n<li>必选：否</li>\n<li>字段类型：String或int</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>startLocation</strong></p>\n<ul>\n<li>描述：增量查询起始位置</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>useMaxFunc</strong></p>\n<ul>\n<li>描述：用于标记是否保存endLocation位置的一条或多条数据，true：不保存，false(默认)：保存， 某些情况下可能出现最后几条数据被重复记录的情况，可以将此参数配置为true</li>\n<li>必选：否</li>\n<li>字段类型：Boolean</li>\n<li>默认值：false\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>requestAccumulatorInterval</strong></p>\n<ul>\n<li>描述：发送查询累加器请求的间隔时间。</li>\n<li>必选：否</li>\n<li>字段类型：int</li>\n<li>默认值：2</li>\n</ul>\n</li>\n</ul>\n\n              <a id=\"2、sql\" style='display: block; height: 35px;'></a>\n              <h3>\n                2、sql\n              </h3>\n            <ul>\n<li><p><strong>connector</strong></p>\n<ul>\n<li>描述：clickhouse-x</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>url</strong></p>\n<ul>\n<li>描述：clickhouse jdbc url</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>schema</strong></p>\n<ul>\n<li>描述：数据库schema名</li>\n<li>必选：否</li>\n<li>参数类型：string</li>\n<li>默认值：无<br /></li>\n</ul>\n</li>\n<li><p><strong>table-name</strong></p>\n<ul>\n<li>描述：表名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>username</strong></p>\n<ul>\n<li>描述：用户名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>password</strong></p>\n<ul>\n<li>描述：密码</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<br />\n\n<ul>\n<li><p><strong>password</strong></p>\n<ul>\n<li>描述：密码</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.polling-interval</strong></p>\n<ul>\n<li>描述：间隔轮训时间。非必填(不填为离线任务)，无默认</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.parallelism</strong></p>\n<ul>\n<li>描述：并行度</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.fetch-size</strong></p>\n<ul>\n<li>描述：每次从数据库中fetch大小，单位：条。</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：1024\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.query-timeout</strong></p>\n<ul>\n<li>描述：数据库连接超时时间，单位：秒。</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：1\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.partition.column</strong></p>\n<ul>\n<li>描述：多并行度读取的切分字段，多并行度下必需要设置</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：1\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.partition.strategy</strong></p>\n<ul>\n<li>描述：数据分片策略</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：range\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.increment.column</strong></p>\n<ul>\n<li>描述：增量字段名称</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.increment.column-type</strong></p>\n<ul>\n<li>描述：增量字段类型</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.start-location</strong></p>\n<ul>\n<li>描述：增量字段开始位置,如果不指定则先同步所有，然后在增量</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.restore.columnname</strong></p>\n<ul>\n<li>描述：开启了cp，任务从sp/cp续跑字段名称。如果续跑，则会覆盖scan.start-location开始位置，从续跑点开始</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无\n​<br /></li>\n</ul>\n</li>\n<li><p><strong>scan.restore.columntype</strong></p>\n<ul>\n<li>描述：开启了cp，任务从sp/cp续跑字段类型</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n\n              <a id=\"五、数据类型\" style='display: block; height: 35px;'></a>\n              <h2>\n                五、数据类型\n              </h2>\n            <table>\n<thead>\n<tr>\n<th>是否支持</th>\n<th>数据类型</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>支持</td>\n<td>BOOLEAN、TINYINT、SMALLINT、INT、BIGINT、FLOAT、DOUBLE、DECIMAL、STRING、VARCHAR、TIMESTAMP、DATE、BINARY、NULL</td>\n</tr>\n<tr>\n<td>不支持</td>\n<td>ARRAY、MAP、STRUCT、UNION</td>\n</tr>\n</tbody></table>\n\n              <a id=\"六、配置示例\" style='display: block; height: 35px;'></a>\n              <h2>\n                六、配置示例\n              </h2>\n            <p>见项目内<code>chunjun-examples</code>文件夹。</p>\n","tree":[{"label":"General Configuration","category":"file"},{"label":"Quick Start","category":"file"},{"label":"Advanced Features","children":[{"label":"增量同步介绍","path":"增量同步介绍","category":"file"},{"label":"断点续传介绍","path":"断点续传介绍","category":"file"},{"label":"脏数据插件设计","path":"脏数据插件设计","category":"file"}],"category":"dir"},{"label":"ChunJun Connector","children":[{"label":"binlog","category":"dir","children":[{"label":"binlog-source","path":"binlog-source","category":"file"}]},{"label":"clickhouse","category":"dir","children":[{"label":"clickhouse-lookup","path":"clickhouse-lookup","category":"file"},{"label":"clickhouse-sink","path":"clickhouse-sink","category":"file"},{"label":"clickhouse-source","path":"clickhouse-source","category":"file"}]},{"label":"db2","category":"dir","children":[{"label":"db2-lookup","path":"db2-lookup","category":"file"},{"label":"db2-sink","path":"db2-sink","category":"file"},{"label":"db2-source","path":"db2-source","category":"file"}]},{"label":"dm","category":"dir","children":[{"label":"dm-sink","path":"dm-sink","category":"file"},{"label":"dm-source","path":"dm-source","category":"file"}]},{"label":"doris","category":"dir","children":[{"label":"dorisbatch-sink","path":"dorisbatch-sink","category":"file"}]},{"label":"elasticsearch","category":"dir","children":[{"label":"es7-lookup","path":"es7-lookup","category":"file"},{"label":"es7-sink","path":"es7-sink","category":"file"},{"label":"es7-source","path":"es7-source","category":"file"}]},{"label":"gbase","category":"dir","children":[{"label":"gbase-lookup","path":"gbase-lookup","category":"file"},{"label":"gbase-sink","path":"gbase-sink","category":"file"},{"label":"gbase-source","path":"gbase-source","category":"file"}]},{"label":"greenplum","category":"dir","children":[{"label":"greenplum-sink","path":"greenplum-sink","category":"file"},{"label":"greenplum-source","path":"greenplum-source","category":"file"}]},{"label":"hbase","category":"dir","children":[{"label":"hbase-lookup","path":"hbase-lookup","category":"file"},{"label":"hbase-sink","path":"hbase-sink","category":"file"},{"label":"hbase-source","path":"hbase-source","category":"file"}]},{"label":"hdfs","category":"dir","children":[{"label":"hdfs-sink","path":"hdfs-sink","category":"file"},{"label":"hdfs-source","path":"hdfs-source","category":"file"}]},{"label":"hive","category":"dir","children":[{"label":"hive-lookup","path":"hive-lookup","category":"file"},{"label":"hive-sink","path":"hive-sink","category":"file"}]},{"label":"influxdb","category":"dir","children":[{"label":"influxdb-sink","path":"influxdb-sink","category":"file"},{"label":"influxdb-source","path":"influxdb-source","category":"file"}]},{"label":"kafka","category":"dir","children":[{"label":"kafka-sink","path":"kafka-sink","category":"file"},{"label":"kafka-source","path":"kafka-source","category":"file"}]},{"label":"kingbase","category":"dir","children":[{"label":"kingbase-sink","path":"kingbase-sink","category":"file"},{"label":"kingbase-source","path":"kingbase-source","category":"file"}]},{"label":"kudu","category":"dir","children":[{"label":"kudu-lookup","path":"kudu-lookup","category":"file"},{"label":"kudu-sink","path":"kudu-sink","category":"file"},{"label":"kudu-source","path":"kudu-source","category":"file"}]},{"label":"logminer","category":"dir","children":[{"label":"LogMiner-source","path":"LogMiner-source","category":"file"},{"label":"LogMiner原理","path":"LogMiner原理","category":"file"},{"label":"LogMiner配置","path":"LogMiner配置","category":"file"}]},{"label":"mongodb","category":"dir","children":[{"label":"mongodb-lookup","path":"mongodb-lookup","category":"file"},{"label":"mongodb-sink","path":"mongodb-sink","category":"file"},{"label":"mongodb-source","path":"mongodb-source","category":"file"}]},{"label":"mysql","category":"dir","children":[{"label":"mysql-lookup","path":"mysql-lookup","category":"file"},{"label":"mysql-sink","path":"mysql-sink","category":"file"},{"label":"mysql-source","path":"mysql-source","category":"file"}]},{"label":"oracle","category":"dir","children":[{"label":"oracle-lookup","path":"oracle-lookup","category":"file"},{"label":"oracle-sink","path":"oracle-sink","category":"file"},{"label":"oracle-source","path":"oracle-source","category":"file"}]},{"label":"pgwal","category":"dir","children":[{"label":"Postgres-CDC","path":"Postgres-CDC","category":"file"}]},{"label":"postgresql","category":"dir","children":[{"label":"postgres-lookup","path":"postgres-lookup","category":"file"},{"label":"postgres-sink","path":"postgres-sink","category":"file"},{"label":"postgres-source","path":"postgres-source","category":"file"}]},{"label":"rocketmq","category":"dir","children":[{"label":"rocketmq-source","path":"rocketmq-source","category":"file"}]},{"label":"saphana","category":"dir","children":[{"label":"saphana-sink","path":"saphana-sink","category":"file"},{"label":"saphana-source","path":"saphana-source","category":"file"}]},{"label":"sqlserver","category":"dir","children":[{"label":"sqlserver-lookup","path":"sqlserver-lookup","category":"file"},{"label":"sqlserver-sink","path":"sqlserver-sink","category":"file"},{"label":"sqlserver-source","path":"sqlserver-source","category":"file"}]},{"label":"sqlservercdc","category":"dir","children":[{"label":"SqlServer CDC实时采集原理","path":"SqlServer CDC实时采集原理","category":"file"},{"label":"SqlServer配置CDC","path":"SqlServer配置CDC","category":"file"},{"label":"SqlserverCDC-source","path":"SqlserverCDC-source","category":"file"}]}],"category":"dir"},{"label":"ChunJun Extend Data Format","children":[{"label":"protobuf-x","path":"protobuf-x","category":"file"}],"category":"dir"},{"label":"Contribution","children":[{"label":"How to define a plugin","path":"How to define a plugin","category":"file"},{"label":"How to submit a great Pull Request","path":"How to submit a great Pull Request","category":"file"}],"category":"dir"}],"toc":[{"text":"Clickhouse Source","level":1,"id":"d8fbd441-1bf2-4244-86c0-4b56cf6d5c17"},{"text":"一、介绍","level":2,"id":"faac4746-0fc0-4aea-bc3b-0df61f6c230a"},{"text":"二、支持版本","level":2,"id":"35c0e202-83f1-490e-8f8d-fd5d390b31c3"},{"text":"三、插件名称","level":2,"id":"feeceab9-da56-4d55-9cc7-c77155221a7d"},{"text":"四、参数说明","level":2,"id":"23381c4d-f6b2-4cd7-b6d4-7bc6463a76f9"},{"text":"1、sync","level":3,"id":"8ec8fe41-6a8e-495d-b086-c3d9cc965454"},{"text":"2、sql","level":3,"id":"7ba0aa6c-add0-4742-8dbc-b53c37a378bd"},{"text":"五、数据类型","level":2,"id":"a4c77f89-3191-430c-a97f-b256c00aad2e"},{"text":"六、配置示例","level":2,"id":"14be8bf8-ad02-430c-82ab-759d08ab4542"}]},"__N_SSG":true}