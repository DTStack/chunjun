{"componentChunkName":"component---src-pages-documents-markdown-remark-parent-file-name-js","path":"/documents/clickhouse-sink/","result":{"data":{"markdownRemark":{"html":"<h1>Clickhouse Sink</h1>\n<h2>一、介绍</h2>\n<p>clickhouse sink</p>\n<h2>二、支持版本</h2>\n<p>ClickHouse 19.x及以上</p>\n<h2>三、插件名称</h2>\n<table>\n<thead>\n<tr>\n<th>SYNC</th>\n<th>clickhousesink, clickhousewriter</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SQL</td>\n<td>clickhouse-x</td>\n</tr>\n</tbody>\n</table>\n<h2>四、参数说明</h2>\n<h3>1、sync</h3>\n<ul>\n<li><strong>connection</strong>\n<ul>\n<li>描述：数据库连接参数，包含jdbcUrl、schema、table参数</li>\n<li>必选：是</li>\n<li>字段类型：List</li>\n<li>默认值：无\n<ul>\n<li>示例：指定jdbcUrl、schema、table</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<pre><code class=\"language-json\">\"connection\": [{\r\n     \"jdbcUrl\": [\"jdbc:clickhouse://localhost:8123/default\"],\r\n  \t \"schema\": \"public\",\r\n     \"table\": [\"table\"]\r\n    }]\n</code></pre>\n<p>​\r\n<br /></p>\n<ul>\n<li><strong>jdbcUrl</strong>\n<ul>\n<li>描述：clickhouse jdbc url，详情参考<a href=\"https://github.com/ClickHouse/clickhouse-jdbc\">clickhouse-jdbc官方文档</a></li>\n<li>必选：是</li>\n<li>字段类型：List</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<br />\n<ul>\n<li><strong>schema</strong>\n<ul>\n<li>描述：数据库schema名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​\r\n<br /></p>\n<ul>\n<li><strong>table</strong>\n<ul>\n<li>描述：目的表的表名称。目前只支持配置单个表，后续会支持多表</li>\n<li>必选：是</li>\n<li>字段类型：List</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>username</strong>\n<ul>\n<li>描述：数据源的用户名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>password</strong>\n<ul>\n<li>描述：数据源指定用户名的密码</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>column</strong>\n<ul>\n<li>描述：目的表需要写入数据的字段,字段之间用英文逗号分隔。例如: \"column\": [\"id\",\"name\",\"age\"]</li>\n<li>必选：是</li>\n<li>字段类型：List</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>fullcolumn</strong>\n<ul>\n<li>描述：目的表中的所有字段，字段之间用英文逗号分隔。例如: \"column\": [\"id\",\"name\",\"age\",\"hobby\"]，如果不配置，将在系统表中获取</li>\n<li>必选：否</li>\n<li>字段类型：List</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>preSql</strong>\n<ul>\n<li>描述：写入数据到目的表前，会先执行这里的一组标准语句</li>\n<li>必选：否</li>\n<li>字段类型：List</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>postSql</strong>\n<ul>\n<li>描述：写入数据到目的表后，会执行这里的一组标准语句</li>\n<li>必选：否</li>\n<li>字段类型：List</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>writeMode</strong>\n<ul>\n<li>描述：控制写入数据到目标表采用 insert into 或者 replace into 或者 ON DUPLICATE KEY UPDATE 语句</li>\n<li>必选：否</li>\n<li>所有选项：insert</li>\n<li>字段类型：String</li>\n<li>默认值：insert</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>batchSize</strong>\n<ul>\n<li>描述：一次性批量提交的记录数大小，该值可以极大减少ChunJun与数据库的网络交互次数，并提升整体吞吐量。但是该值设置过大可能会造成ChunJun运行进程OOM情况</li>\n<li>必选：否</li>\n<li>字段类型：int</li>\n<li>默认值：1024</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>semantic</strong>\n<ul>\n<li>描述：sink端是否支持二阶段提交</li>\n<li>注意：\n<ul>\n<li>如果此参数为空，默认不开启二阶段提交，即sink端不支持exactly_once语义；</li>\n<li>当前只支持exactly-once 和at-least-once</li>\n</ul>\n</li>\n<li>必选：否</li>\n<li>参数类型：String\n<ul>\n<li>示例：\"semantic\": \"exactly-once\"</li>\n</ul>\n</li>\n<li>默认值：at-least-once</li>\n</ul>\n</li>\n</ul>\n<br />\n<h3>2、sql</h3>\n<ul>\n<li><strong>connector</strong>\n<ul>\n<li>描述：clickhouse-x</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>url</strong>\n<ul>\n<li>描述：clickhouse jdbc url</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>table-name</strong>\n<ul>\n<li>描述：表名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>username</strong>\n<ul>\n<li>描述：用户名</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>password</strong>\n<ul>\n<li>描述：密码</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>password</strong>\n<ul>\n<li>描述：密码</li>\n<li>必选：是</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>sink.buffer-flush.max-rows</strong>\n<ul>\n<li>描述：批量写数据条数，单位：条</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：1024</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>sink.buffer-flush.interval</strong>\n<ul>\n<li>描述：批量写时间间隔，单位：毫秒</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：10000</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>sink.all-replace</strong>\n<ul>\n<li>描述：是否全部替换数据库中的数据(如果数据库中原值不为null,新值为null,如果为true则会替换为null)</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：false</li>\n</ul>\n</li>\n</ul>\n<p>​<br /></p>\n<ul>\n<li><strong>sink.semantic</strong>\n<ul>\n<li>描述：sink端是否支持二阶段提交</li>\n<li>注意：\n<ul>\n<li>如果此参数为空，默认不开启二阶段提交，即sink端不支持exactly_once语义；</li>\n<li>当前只支持exactly-once 和at-least-once</li>\n</ul>\n</li>\n<li>必选：否</li>\n<li>参数类型：String\n<ul>\n<li>示例：\"semantic\": \"exactly-once\"</li>\n</ul>\n</li>\n<li>默认值：at-least-once</li>\n</ul>\n</li>\n</ul>\n<br />\n<ul>\n<li><strong>sink.parallelism</strong>\n<ul>\n<li>描述：写入结果的并行度</li>\n<li>必选：否</li>\n<li>字段类型：String</li>\n<li>默认值：无</li>\n</ul>\n</li>\n</ul>\n<h2>五、数据类型</h2>\n<table>\n<thead>\n<tr>\n<th>支持</th>\n<th>BOOLEAN</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td>TINYINT</td>\n</tr>\n<tr>\n<td></td>\n<td>SMALLINT</td>\n</tr>\n<tr>\n<td></td>\n<td>INT</td>\n</tr>\n<tr>\n<td></td>\n<td>BIGINT</td>\n</tr>\n<tr>\n<td></td>\n<td>FLOAT</td>\n</tr>\n<tr>\n<td></td>\n<td>DOUBLE</td>\n</tr>\n<tr>\n<td></td>\n<td>DECIMAL</td>\n</tr>\n<tr>\n<td></td>\n<td>STRING</td>\n</tr>\n<tr>\n<td></td>\n<td>VARCHAR</td>\n</tr>\n<tr>\n<td></td>\n<td>CHAR</td>\n</tr>\n<tr>\n<td></td>\n<td>TIMESTAMP</td>\n</tr>\n<tr>\n<td></td>\n<td>DATE</td>\n</tr>\n<tr>\n<td></td>\n<td>BINARY</td>\n</tr>\n<tr>\n<td></td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>暂不支持</td>\n<td>ARRAY</td>\n</tr>\n<tr>\n<td></td>\n<td>MAP</td>\n</tr>\n<tr>\n<td></td>\n<td>STRUCT</td>\n</tr>\n<tr>\n<td></td>\n<td>UNION</td>\n</tr>\n</tbody>\n</table>\n<h2>六、配置示例</h2>\n<p>见项目内<code>chunjun-examples</code>文件夹。</p>","id":"2b016cfc-ffb8-5869-9035-617d77eea70e","parent":{"id":"05e6b3ee-86c1-55d7-b373-ff04bfd45262","name":"clickhouse-sink","modifiedTime":"2022-06-07T13:14:11.895Z","ino":3377699721738924}}},"pageContext":{"id":"2b016cfc-ffb8-5869-9035-617d77eea70e","parent__name":"clickhouse-sink","__params":{"parent__name":"clickhouse-sink"}}},"staticQueryHashes":["527733040"]}